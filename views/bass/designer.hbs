<div id="alerts"></div>
<h1>Designer</h1>
<p>Hier k√∂nnen tolle Songs designed werden.</p>
<div class="panel panel-default">
	<div class="panel-body">
		<ul class="list-inline btn" id="line">

		</ul>
	</div>
</div>
<style>
	.cmd-btn {
		margin: 5pt;
	}
	.effect {
		margin-right: 3pt;
	}
</style>
<div class="panel panel-default">
	<div class="panel-body">
		<div class="container-fluid">
			<div class="row flush-col">
				{{#each effects}}
					<div class="mix cmd-btn col-sm-3 list-group-item btn btn-primary" effectValue="{{this}}">
						{{this}}
					</div>
				{{/each}}
			</div>
		</div>
	</div>
</div>
<button class="btn btn-lg btn-success btn-block" id="play">Play!</button>
<script type="text/html" id="error-play">
	<div class="alert alert-danger alert-dismissible" role="alert">
		<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		<strong>Fehler!</strong> Konnte nicht abspielen.
	</div>
</script>
<script type="text/html" id="success-play">
	<div class="alert alert-success alert-dismissible" role="alert">
		<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		<strong>Erfolgreich!</strong> Erfolgreich abgespielt.
	</div>
</script>
<script>
	var arr = [];
	$(".cmd-btn").click(function() {
		var val = $(this).attr('effectValue');
		arr.push(val);
		$("#line").append("<li class='btn btn-default btn-sm list-group-item effect'>" + val + "</li>");
	});

	$("#play").click(function() {
		$.ajax("/api/bass/play?bass=" + encodeURI(JSON.stringify(arr))).done(function(res) {
			$($("#success-play").html()).appendTo($("#alerts"));
			arr = [];
			$("#line").html("");
		})
		.error(function() {
			$($("#error-play").html()).appendTo($("#alerts"));
		});
	});
</script>
